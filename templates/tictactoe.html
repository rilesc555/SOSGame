<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tic-Tac-Toe Game</title>
    <!-- Tailwind CSS -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100 h-screen flex items-center justify-center">

<div class="container text-center">
    <h1 class="text-3xl font-bold mb-6">Tic-Tac-Toe</h1>

    <div id="gameBoard" class="grid grid-cols-3 grid-rows-3 gap-4 mx-auto mb-6 w-72">
        <div class="cell bg-white w-24 h-24 border-2 border-black flex items-center justify-center text-4xl cursor-pointer" data-index="0"></div>
        <div class="cell bg-white w-24 h-24 border-2 border-black flex items-center justify-center text-4xl cursor-pointer" data-index="1"></div>
        <div class="cell bg-white w-24 h-24 border-2 border-black flex items-center justify-center text-4xl cursor-pointer" data-index="2"></div>
        <div class="cell bg-white w-24 h-24 border-2 border-black flex items-center justify-center text-4xl cursor-pointer" data-index="3"></div>
        <div class="cell bg-white w-24 h-24 border-2 border-black flex items-center justify-center text-4xl cursor-pointer" data-index="4"></div>
        <div class="cell bg-white w-24 h-24 border-2 border-black flex items-center justify-center text-4xl cursor-pointer" data-index="5"></div>
        <div class="cell bg-white w-24 h-24 border-2 border-black flex items-center justify-center text-4xl cursor-pointer" data-index="6"></div>
        <div class="cell bg-white w-24 h-24 border-2 border-black flex items-center justify-center text-4xl cursor-pointer" data-index="7"></div>
        <div class="cell bg-white w-24 h-24 border-2 border-black flex items-center justify-center text-4xl cursor-pointer" data-index="8"></div>
    </div>

    <div class="message text-lg font-medium mb-4" id="message"></div>

    <button class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded" onclick="resetGame()">Restart Game</button>
</div>

<script>
    let currentPlayer = '{{ current_player }}';
    let gameActive = true;
    let board = ['', '', '', '', '', '', '', '', ''];

    const cells = document.querySelectorAll('.cell');
    const message = document.getElementById('message');

    cells.forEach(cell => cell.addEventListener('click', handleCellClick));

    function handleCellClick(e) {
        const index = e.target.getAttribute('data-index');

        if (board[index] === '' && gameActive) {
            board[index] = currentPlayer;
            e.target.textContent = currentPlayer;

            if (checkWin()) {
                message.textContent = `Player ${currentPlayer} Wins!`;
                gameActive = false;
            } else if (board.every(cell => cell !== '')) {
                message.textContent = 'It\'s a Draw!';
                gameActive = false;
            } else {
                currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
                message.textContent = `Player ${currentPlayer}'s turn`;
            }
        }
    }

    function checkWin() {
        const winPatterns = [
            [0, 1, 2], [3, 4, 5], [6, 7, 8],
            [0, 3, 6], [1, 4, 7], [2, 5, 8],
            [0, 4, 8], [2, 4, 6]
        ];

        return winPatterns.some(pattern => {
            return pattern.every(index => board[index] === currentPlayer);
        });
    }

    function resetGame() {
        currentPlayer = 'X';
        gameActive = true;
        board = ['', '', '', '', '', '', '', '', ''];
        cells.forEach(cell => {
            cell.textContent = '';
        });
        message.textContent = `Player ${currentPlayer}'s turn`;
    }

    // Initialize the message at the start of the game
    message.textContent = `Player ${currentPlayer}'s turn`;
</script>

</body>
</html>